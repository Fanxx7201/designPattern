# 计算机基础
<br>

## 目录

### 计算机组成原理- 概述
* [计算机发展历史](#计算机发展历史)
* [计算机的分类](#计算机的分类)
* [计算机的体系与结构](#计算机的体系与结构)
* [计算机的层次与编程语言](#计算机的层次与编程语言)
* [计算机的速度单位](#计算机的速度单位)
* [计算机的字符与编码集](#计算机的字符与编码集)
### 计算机组成原理- 组成
* [计算机的字符与编码集](#计算机的字符与编码集)
* [计算机的总线](#计算机的总线)
* [计算机的输入输出设备](#计算机的输入输出设备)
* [计算机的存储器概览](#计算机的存储器概览)
* [计算机的主存储器与辅助存储器](#计算机的主存储器与辅助存储器)
* [计算机的高速缓存](#计算机的高速缓存)
* [计算机的指令系统](#计算机的指令系统)
* [计算机的控制器](#计算机的控制器)
* [计算机的运算器](#计算机的运算器)
* [计算机指令执行过程](#计算机指令执行过程)
### 计算机组成原理- 计算篇

### 操作系统之基础篇






## 计算机组成原理- 概述
### 计算机的发展历史
* 计算机发展的四个阶段
> 第一阶段: 电子管计算机 最著名的:埃尼阿克  
> 第二阶段: 晶体管计算机  
> 第三阶段: 集成电路计算机  
> 第四阶段: 超大规模集成电路计算机  
* 微型计算机的发展历史
> 单核CPU  
> 多核CPU
### 计算机的分类
* 超级计算机
> 功能最强、运算能力最快、存储容量最大的计算机, 多用于国家高科技领域和尖端技术研究  
> 标记他们运算速度的单位是TFlop/s : 每秒一万亿次浮点计算  
* 大型计算机(去"IOE", 将大型计算机转向为服务器)
* 迷你计算机(服务器)
> 称为服务器, 不需要特殊的空调场所, 具备不错的算力, 可以完成较复杂的运算.  
* 工作站
> 高端的通用微型计算机, 提供比个人计算机更强大的性能  
* 微型计算机
> 又称为个人计算机.  
### 计算机的体系与结构
#### 冯诺依曼体系
> 将程序指令和数据一起存储的计算机设计概念结构  
* 组件: 
> ①必须有一个存储器: 存储运行的程序,存储运行所需要的数据  
> ②必须有一个控制器: 控制程序的扭转  
> ③必须有一个运算器: 负责完成运算的操作  
> ④必须有输入设备  
> ⑤必须有输出设备  
* 功能:
> 能够把需要的程序和数据送至计算机中   
> 能够长期记忆、数据、中间结果及最终运算结果的能力(存储器)  
> 能够具备算数、逻辑运算和数据传送等数据加工处理的能力(运算器)   
> 能够按照要求将处理结果输出给用户  
* CPU = 运算器 + 控制器
* 冯诺依曼瓶颈: CPU和存储器速率之间的问题无法调和, CPU的处理速度快, 而CPU到存储设备的传输速度慢, CPU经常空转等待数据的传输

#### 现代计算机的结构
* CPU = 运算器 + 控制器 + 存储器. CPU是以存储器为核心
### 计算机的层次与编程语言
#### 程序翻译与程序解释
* 人类语言和计算机语言是不相通的, 需要将人类语言翻译成计算机语言.
* 程序翻译: 高级的计算机语言L1, 生成低级的计算机语言L0后, 计算机执行低级的计算机语言. (编译器进行翻译)
* 程序解释: 为了实现高级的计算机语言L1, 使用L0实现另一个程序, L1作为输入进行执行, 每一个L1的语句, 都会在L0里做等价转换.(解释器实现另一个程序)
* 程序翻译与程序解释的异同
1. 计算机执行的指令都是L0
2. 翻译过程生成新的L0程序, 解析过程不生成新的L0程序
3. 解释过程由L0编写的解释器去解释L1程序
* JAVA是[翻译 + 解释]型的语言. java程序通过编译生成JVM字节码文件, 然后解释器解析为机器码进行执行.
#### 计算机的层次与编程语言
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E5%B1%82%E6%AC%A1%E4%B8%8E%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80.png)

* 微指令 < 微程序 = 机器指令
1. 一条机器指令对应一个微程序
2. 一个微程序对应一组微指令
### 计算机的速度单位
#### 容量单位
* 在物理层面上, 只认识高低电平. 高电平表示1, 低电平表示0. 0和1表示的是比特位(bit).
* 字节: 1Byte = 8bits
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E5%AE%B9%E9%87%8F%E5%8D%95%E4%BD%8D.png)
* 为什么500G硬盘格式化后, 为465G? 硬盘商一般用10进位标记容量.
#### 速度单位
* 网络速度
1. 为什么电信100M光纤, 测试峰值速度只有12M每秒? 100M/s = 100Mbps = 100Mbit/s, 这里算的是比特位. 需要除以8转为字节, 100Mbit/s = (100/8)MB/s = 12.5MB/s
* CPU速度
1. CPU的速度一般体现为CPU的时钟频率, CPU的时钟频率的单位一般为赫兹(Hz), 主流的CPU时钟频率在2GHz以上
2. 赫兹: 秒分之一. 每秒中的周期性变动重复次数的计量. 它并不是描述计算机领域专用的.
3. 2GHz = 2 * 1000 ^ 3  Hz = 每秒20亿次. 也就是每秒从0变为1的频次有20亿次.
### 计算机的字符与编码集
#### 字符编码集的历史
* ASCII码
1. 7个bit可以完全表示ASCII码, 包含95个可打印字符, 33个不可打印字符(包括控制字符), 也就是2^7个字符.
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/ASCII%E7%A0%81%E8%A1%A8.png)
* Extended ASCII 码
1. 从7个bits拓展到8个
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/Extended%20ASCII%20%E7%A0%81.png)
* 字符编码集的国际化
1. 欧洲, 中亚等国家语言多样, 语言体系不一样, 很多国家不是有限字符组合的语言.
#### 中文编码集
1. GB2312 
2. GBK <汉字内码拓展规范> 收录21003个汉字
3. Unicode: 兼容全球的字符集. 统一码, 万国码, 单一码. 定义了世界通用的符号集, UTF-8, UTF-16等实现了编码. UTF-8是以字节为单位对Unicode进行编码
4. 编程: UTF-8编码. WINDOWS: 系统默认GBK

## 计算机组成原理- 组成
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E7%AB%A0%E6%A6%82%E8%A7%88.png)
### 计算机的总线
#### 总线的概述
* USB = Universal Serial Bus 通用串行总线
1. 提供了对外连接的接口
2. 不同设备通过USB接口进行连接
3. 连接的标准, 促使外围设备接口的统一
* PCI总线
* ISA总线等
#### 总线的分类
* 片内总线: 芯片内部总线, 连接寄存器和寄存器之间, 也可以连接寄存器与控制器、运算器之间. --> 高集成度芯片内部的信息传输线
* 系统总线: 连接系统内外部的总线. 系统总线包括以下几部分
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF.png)
1. 数据总线
> 总线位数一般和CPU位数相同(32位、64位), 总线的位数是数据总线的重要参数
> 双向传输各个部件的数据信息
2. 地址总线
> 指定源数据或者目的数据在内存中的地址
> 地址总线的位数与存储单元有关
3. 控制总线
> 用来发出各种控制信号的传输线
> 控制信号经由控制总线从一个组件发送给另一个组件
> 控制总线可以监视不同组件之间的状态(就绪/未就绪)
#### 总线的仲裁
* 为什么需要总线仲裁? 假设主存要和IO设备交换数据, 硬盘和IO设备都就绪了, 那么谁先使用总线呢? 就需要仲裁器的仲裁.(解决总线使用权冲突的问题)
* 总线仲裁的方法? 
1. 链式查询
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E9%93%BE%E5%BC%8F%E6%9F%A5%E8%AF%A2.png)
> 好处是电路复杂度低, 仲裁方式简单
> 坏处是优先级低的设备难以获得总线使用权, 对电路故障敏感
2. 计时器定时查询: 仲裁控制器对设备编号, 使用计数器累计计数. 接收到仲裁信号后, 往所有设备发出计数值. 计数值与设备编号一致则获得总线使用权.
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E8%AE%A1%E6%97%B6%E5%99%A8%E5%AE%9A%E6%97%B6%E6%9F%A5%E8%AF%A2.png)
3. 独立请求: 每个设备均有总线独立连接仲裁器. 设备可以独立向仲裁器发送请求, 接收请求. 当同时收到多个请求信号, 仲裁器有权按优先级分配使用权.
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E7%8B%AC%E7%AB%8B%E8%AF%B7%E6%B1%82.png)
> 好处: 响应速度快, 优先顺序可以动态改变
> 坏处: 设备连线多, 总线控制复杂

### 计算机的输入输出设备
#### 常见的输入输出设备

#### 输入输出接口的通用设计
* 数据线: I/O设备与主机进行数据交换. 分为单向传输和双向传输

* 状态线: I/O设备状态向主机报告的信号线, 查询设备是否已经正常连接并就绪, 可以查询设备是否已经被占用

* 命令线: CPU向设备发送命令的信号线(CPU读取磁盘某个区域的数据), 可以发送读写信号和启动停止信号(主机发送信号, 让光驱启动或者停止).

* 设备选择线: 主机选择I/O设备进行操作的信号线, 对连在总线上的设备进行选择(USB总线连接了3个u盘, 通过设备选择线进行选择要连接的u盘).

#### CPU与IO设备的通信
* 前提: CPU的速度和IO设备的速度不一致, CPU速度可能是IO设备的十倍百倍.

* 程序中断方法: IO设备就绪时, 给CPU发送中断信号, CPU有专门的电路响应中断信号.
> 某一个时刻, CPU发送信号, 启动打印机, 打印机准备完成时, 向CPU发送中断信号, CPU响应信号(可能延时), 这时CPU发送数据.  
> 缺点是频繁地打断CPU  
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%96%AD.png)
* DMA(直接存储器访问): DMA直接连接主存与IO设备, DMA工作时不需要CPU的参与. 硬盘和显卡都有DMA设备
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/DMA.png)

### 计算机的存储器概率
####存储器的分类
* 按介质分类
1. 半导体存储器: 内存, u盘, 固态硬盘
2. 磁存储器: 磁带, 磁盘
* 按照存取方式
1. 随机存储器(RAM), 可以随机读取, 和位置无关
2. 串行存储器: 与位置有关, 按顺序查找
3. 只读存储器(ROM), 只读不写.
####存储器的层次结构
* 读写速度: 5400转, 7200转
* 存储容量: 2t, 4g
* 价格
* 容量 + 价格 => 位价: 每比特位价格
----
* 存储器的层次结构
1. 缓存:速度快, 位价高
2. 主存: 速度适中, 位价适中
3. 辅存: 速度慢, 位价低  
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E5%AD%98%E5%82%A8%E5%99%A8%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.png)
* 缓存-主存层次: 是利用了局部性原理. 实现: 在CPU和主存之间增加了一层速度快(容量小)的cache, 目的是解决主存[速度]不足的问题   
> 什么是局部性原理? 局部性原理是CPU访问存储器时, 无论是存取指令还是存取数据, 所访问的存储单元都趋于聚集在一个较小的连续区域中.  
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E5%B1%80%E9%83%A8%E6%80%A7%E5%8E%9F%E7%90%86.png)
* 主存-辅存层次: 是利用局部性原理. 实现: 主存之外增加辅助存储器(磁盘, SD卡, U盘等), 目的是解决主存[容量]不足问题.
### 计算机的主存储器与辅助存储器
#### 主存储器 - 内存
* RAM(随机存取存储器), 通过电容来存储数据, 必须隔一段时间刷新一次, 断电的话一段时间后将丢失所有数据.   
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E4%B8%BB%E5%AD%98%E5%82%A8%E5%99%A8-%E5%86%85%E5%AD%98.png)
* 32位系统, 支持2^32 = 4GB内存. 64位系统, 支持2 ^ 64 = 2 ^34 GB  
#### 辅助存储器 - 磁盘
* 算法
1. 先来先服务算法
2. 最短寻道时间算法
3. 扫描算法
4. 循环扫描算法
### 计算机的高速缓存
#### 高速缓存的工作原理
* 内存中的两个概念
1. 字: 存放在一个存储单元中的二进制代码组合.可以表示一个数据, 一个指令或者是一个字符串, 是最小的单位  
2. 字块: 存储在连续的存储单元中被看做是一个单元的一组字.  
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E5%AD%97%E4%B8%8E%E5%AD%97%E5%9D%97%E7%9A%84%E8%BF%90%E7%AE%97.png)
> 字的地址包含两个部分, 前m位指定字块地址, 后b位指定字在字块中的地址  
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E5%AD%97%E7%9A%84%E8%AE%A1%E7%AE%97.png)

* 缓存和主存的关系
1. 存储的逻辑结构相似
2. 缓存容量小
3. 缓存速度快
* CPU与缓存, 主存的关系
1. CPU需要的数据在缓存中, 会去缓存中去拿
2. 不在的话去主存中拿
* 高速缓存的工作原理  
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.png)
* 计算得知, 为了提高CPU执行效率, 需要将缓存中的数据替换为CPU需要的数据
#### 高速缓存的替换策略
* 替换时机: 缓存中没有数据时, 就需要从主存中载入所需的数据.
* 替换策略
1. 随机算法
2. 先进先出算法(FIFO)
> 将缓存看做一个先进先出的队列, 优先替换掉最先进去队列的字块  
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E5%85%88%E8%BF%9B%E5%85%88%E5%87%BA%E7%AE%97%E6%B3%95.png)
3. 最不经常使用算法(LFU)
> 优先淘汰最不经常使用的字块, 这需要额外的空间记录字块的使用频率
4. 最近最少使用算法(LRU)
> 优先淘汰一段时间内没有使用的字块, 有多种实现方法, 一般使用双向链表. 把当前访问的节点置于链表前面, 保证链表的头节点是最近使用的. 淘汰尾部.
### 计算机的指令系统
#### 机器指令的形式
* 由两部分组成: 操作码, 地址码
> 操作码: 指明指令要完成的操作, 操作码的位数反映了机器的操作种类, 如果有8位操作码, 那就有2 ^ 8 = 256种操作.  
> 地址码: 直接给出操作数或者是操作数的地址, 分三地址指令, 二地址指令, 和一地址指令  
1. 三地址指令, 有三个地址, 操作码OP, 如果是加法操作的话, 就是地址1 + 地址2 = 地址3   
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E4%B8%89%E5%9C%B0%E5%9D%80%E6%8C%87%E4%BB%A4.png)
2. 二地址指令  
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E4%BA%8C%E5%9C%B0%E5%9D%80%E6%8C%87%E4%BB%A4.png)
3. 一地址指令一种是对自己操作, 另外一种比如说是自增操作, 不需要其他地址参与的  
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E4%B8%80%E5%9C%B0%E5%9D%80%E6%8C%87%E4%BB%A4.png)
4. 零地址指令: 机器指令中无地址码, 空操作, 停机操作, 中断返回操作等等.    
#### 机器指令的操作类型
* 数据传输
1. 寄存器之间, 寄存器与存储单元, 存储单元之间传送
2. 数据读写, 交换地址数据, 清零置1等操作
* 算数逻辑操作类型
1. 操作数之间的加减乘除运算
2. 操作数的与或非等逻辑位运算
* 移位操作
1. 数据左移 -> 相当于乘以2,  数据右移 -> 相当于除以2
2. 移位操作是完成数据在算术逻辑单元的必要操作
* 控制指令
1. 等待指令, 停机指令, 空操作指令, 中断指令等
#### 机器指令的寻址方式
* 指令寻址
1. 顺序寻址: 按照地址顺序, 执行指令
2. 跳跃寻址: 指令中有某个指令是jump, 就跳跃回指定的指令了
* 数据寻址
1. 立即寻址 : 指令直接获得操作数, 无需访问存储器
2. 直接寻址 : 直接给出操作数在主存中的地址, 寻找操作数简单
3. 间接寻址 : 指令地址码给出的是操作数地址的地址, 需要访问一次或者多次主存来获取操作数
### 计算机的控制器
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E6%8E%A7%E5%88%B6%E5%99%A8.png)
#### 程序计数器
* 存储下一条指令的地址, 循环从程序计数器中拿出指令. 指令拿出来的时候, 指向下一条指令
#### 时序发生器
* 电气工程领域, 用于发送时序脉冲. CPU依据不同的时序脉冲有节奏地进行工作. 类似一个节拍器.
#### 指令译码器
* 是控制器的主要部件, 计算机指令是由操作码和地址码组成, 指令译码器是翻译操作码对应的操作以及控制传输地址码对应的数据
#### 指令寄存器
* 控制器的主要部件之一, 从主存或者是高速缓存取计算机指令
#### 主存地址寄存器
* 保存当前CPU正要访问的内存单元的地址
#### 主存数据寄存器
* 保存当前CPU正要读或写的主存数据
#### 通用寄存器
* 用于暂时存放或者传送数据或者指令, 可以保存ALU的运算中间结果, 容量比一般专用寄存器容量大
### 计算机的运算器
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E8%BF%90%E7%AE%97%E5%99%A8.png)
#### 数据缓冲器
* 输入缓冲: 暂时存放外设送过来的数据
* 输出缓冲: 暂时存放送往外设的数据
#### ALU: 算术逻辑单元, 是运算器的主要组成
* 可以完成常见的位运算(左右移, 与或非等), 算术运算(加减乘除等)
#### 状态字寄存器
* 存放运算状态(条件码, 进位, 溢出, 结果正负等)
* 存放运算控制信息(调试跟踪标记位, 允许中断位等)
#### 通用寄存器
* 用于暂时存放或传送数据或者指令, 可以保存ALU的运算中间结果, 容量比一般专用寄存器要大
### 计算机指令执行过程
#### 指令执行过程
* 取指令 -> 分析指令-> 执行指令
1. 将数据和指令缓存起来, 放到CPU的高速缓存中
2. 程序计数器, 将需要执行的指令缓存起来. 总线来到指令缓存, 拿到指令的操作码和地址码
3. 总线来到指令寄存器, 缓存起来指令的内容(也就是指令的操作码和地址码)
4. 将指令发送给指令译码器和时序发生器, 指令译码器理解了指令的内容之后, 发出控制信号, 程序计数器 + 1, 来到运算器中, 进行操作.
5. 转载数据到寄存器, ALU处理数据, 记录运算状态, 送出运算结果.
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.png)

#### CPU的流水线设计
* 类似于工厂的装配线, 使得多个产品同时被加工, 同一个时刻, 不同产品位于不同的加工阶段.
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/CPU%E6%B5%81%E6%B0%B4%E7%BA%BF.png)

## 计算机组成原理- 计算篇
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%20%E8%AE%A1%E7%AE%97%E7%AF%87.png)
### 进制运算的基础

## 操作系统- 基础篇
![Image text](https://github.com/Fanxx7201/designPattern/blob/master/src/main/resources/pics/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%BC%94%E8%BF%9B.png)
* 多道程序设计
> 理解: 早期的批处理系统, 一次只能一次处理一个任务. 多道程序设计, 可以一次处理多个任务.  
> 概念: 在计算机内存中存放多个程序, 多道程序在计算机的管理之下相互穿插运行, 对多道程序的管理是操作系统的重要功能.  
> 五大功能: 进程管理, 文件管理, 存储管理, 设备管理, 作业管理
